在qemu中,可以指定内存的大小.

```c
uint8_t *phys_ram_base; /* 虚拟的x86的物理内存的基址 */
```



```c
 /* main */
	phys_ram_fd = open(phys_ram_file, O_CREAT | O_TRUNC | O_RDWR, 0600); /* 创建一个临时文件作为x86的ram */
    if (phys_ram_fd < 0) {
        fprintf(stderr, "Could not open temporary memory file '%s'\n", 
                phys_ram_file);
        exit(1);
    }    
    total_ram_size = phys_ram_size + vga_ram_size;
    ftruncate(phys_ram_fd, total_ram_size);
    unlink(phys_ram_file);
    /* qemu分配一块内存空间,作为模拟x86的内存条 */
    phys_ram_base = mmap(get_mmap_addr(total_ram_size), 
                         total_ram_size, 
                         PROT_WRITE | PROT_READ, MAP_SHARED | MAP_FIXED, 
                         phys_ram_fd, 0);
```

linux操作系统之中,实际使用的是线性地址,每当我们跑的虚拟内核想要访问某个线性地址的时候,会进行一个映射.

